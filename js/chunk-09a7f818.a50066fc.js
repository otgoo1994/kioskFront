(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09a7f818"],{"2a8a":function(t,e,s){"use strict";s("d3f0")},"33cb":function(t,e,s){"use strict";s("40f7")},"40f7":function(t,e,s){},a7dd:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}]},[s("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success",align:"right"}}),s("div",{staticClass:"container-fluid mt--7"},[s("div",{staticClass:"row card shadow border-0 p-5"},[s("el-row",{attrs:{gutter:10}},[s("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[s("el-input",{attrs:{placeholder:"Код (20 тэмдэг)",maxlength:"20",clearable:""},model:{value:t.kiosk.code,callback:function(e){t.$set(t.kiosk,"code",e)},expression:"kiosk.code"}})],1),s("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[s("el-select",{staticStyle:{width:"85%","margin-right":"10px"},attrs:{filterable:"",placeholder:"Хот / Аймаг"},model:{value:t.kiosk.city,callback:function(e){t.$set(t.kiosk,"city",e)},expression:"kiosk.city"}},t._l(t.city,(function(t,e){return s("el-option",{key:e,attrs:{label:t.cityname,value:t.id}})})),1),s("el-button",{attrs:{icon:"el-icon-plus",circle:""},on:{click:function(e){t.modals.city=!0}}})],1),s("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[s("el-select",{staticStyle:{width:"85%","margin-right":"10px"},attrs:{filterable:"",placeholder:"Дүүрэг / Сум"},model:{value:t.kiosk.district,callback:function(e){t.$set(t.kiosk,"district",e)},expression:"kiosk.district"}},t._l(t.getDistrict,(function(t,e){return s("el-option",{key:e,attrs:{label:t.districtname,value:t.id}})})),1),s("el-button",{attrs:{icon:"el-icon-plus",circle:""},on:{click:function(e){t.modals.district=!0}}})],1),s("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:6,lg:6,xl:6}},[s("el-time-select",{staticStyle:{width:"100%"},attrs:{"picker-options":{start:"06:00",step:"00:10",end:"23:30"},placeholder:"Асах цаг"},model:{value:t.kiosk.poweron,callback:function(e){t.$set(t.kiosk,"poweron",e)},expression:"kiosk.poweron"}})],1),s("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:6,lg:6,xl:6}},[s("el-time-select",{staticStyle:{width:"100%"},attrs:{"picker-options":{start:"06:00",step:"00:10",end:"23:30"},placeholder:"Унтрах цаг"},model:{value:t.kiosk.poweroff,callback:function(e){t.$set(t.kiosk,"poweroff",e)},expression:"kiosk.poweroff"}})],1),s("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[s("el-input",{attrs:{type:"textarea",rows:4,placeholder:"Дэлгэрэнгүй хаяг (60 тэмдэг)",maxlength:"60"},model:{value:t.kiosk.address,callback:function(e){t.$set(t.kiosk,"address",e)},expression:"kiosk.address"}})],1),s("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:24,xl:24,align:"right"}},[s("el-button-group",[s("el-button",{attrs:{type:"danger",icon:"el-icon-arrow-left"},on:{click:function(e){return t.$router.push("/kiosks")}}},[t._v(" Болих")]),s("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:t.addKiosk}},[t._v(" Хадгалах")])],1)],1)],1)],1)]),s("modal",{attrs:{show:t.modals.city},on:{"update:show":function(e){return t.$set(t.modals,"city",e)}}},[s("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("Хот / Аймаг бүртгэх")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12",style:{"max-height":"400px",overflow:"auto"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newCity,expression:"newCity"}],staticClass:"form-control mt-1 specInput",attrs:{type:"text",placeholder:"Хотын нэр ж. Улаанбаатар"},domProps:{value:t.newCity},on:{input:function(e){e.target.composing||(t.newCity=e.target.value)}}})])]),s("template",{slot:"footer"},[s("base-button",{staticClass:"ml-auto",attrs:{type:"link"},on:{click:function(e){t.modals.city=!1}}},[t._v("Гарах")]),s("base-button",{attrs:{type:"primary"},on:{click:t.addCity}},[t._v("Хадгалах")])],1)],2),s("modal",{attrs:{show:t.modals.district},on:{"update:show":function(e){return t.$set(t.modals,"district",e)}}},[s("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("Дүүрэг / Сум бүртгэх")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12",style:{"max-height":"400px",overflow:"auto"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"Хот / Аймаг"},model:{value:t.newDistrict.city,callback:function(e){t.$set(t.newDistrict,"city",e)},expression:"newDistrict.city"}},t._l(t.city,(function(t,e){return s("el-option",{key:e,attrs:{label:t.cityname,value:t.id}})})),1)],1),s("div",{staticClass:"col-md-12",style:{"max-height":"400px",overflow:"auto"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newDistrict.district,expression:"newDistrict.district"}],staticClass:"form-control mt-1 specInput",attrs:{type:"text",placeholder:"Дүүрэг / Сум нэр ж. Налайх"},domProps:{value:t.newDistrict.district},on:{input:function(e){e.target.composing||t.$set(t.newDistrict,"district",e.target.value)}}})])]),s("template",{slot:"footer"},[s("base-button",{staticClass:"ml-auto",attrs:{type:"link"},on:{click:function(e){t.modals.district=!1}}},[t._v("Гарах")]),s("base-button",{attrs:{type:"primary"},on:{click:t.addDistrict}},[t._v("Хадгалах")])],1)],2)],1)},a=[],o=(s("4160"),s("159b"),{data:function(){return{kiosk:{code:"",city:"",district:"",address:"",poweron:"",poweroff:""},city:[],district:[],modals:{district:!1,city:!1},newCity:"",newDistrict:{city:"",district:""},loading:!1}},computed:{getDistrict:function(){var t=this,e=[];return this.district.forEach((function(s){t.kiosk.city==s.cityId&&e.push(s)})),e}},mounted:function(){this.getInfo()},methods:{addKiosk:function(){var t=this,e=this;this.loading=!0;var s=localStorage.getItem("token");e.$axios({method:"POST",url:this.$appUrl+"/user/add-new-kiosk",headers:{Authorization:"Bearer ".concat(s)},data:{kiosk:this.kiosk}}).then((function(s){e.loading=!1,"success"==s.data.result?t.$notify({title:"Амжилттай",message:"Бүртгэгдлээ",type:"success"}):t.$notify({title:"Амжилтгүй",message:"Бүртгэлтэй код",type:"danger"})})).catch((function(t){e.loading=!1,console.log(t)}))},addDistrict:function(){var t=this,e=this;this.loading=!0;var s=localStorage.getItem("token");e.$axios({method:"POST",url:this.$appUrl+"/user/add-new-district",headers:{Authorization:"Bearer ".concat(s)},data:{city:this.newDistrict.city,district:this.newDistrict.district}}).then((function(s){e.loading=!1,"success"==s.data.result?(t.$notify({title:"Амжилттай",message:"Бүртгэгдлээ",type:"success"}),e.modals.district=!1,e.getInfo()):t.$notify({title:"Амжилтгүй",message:"Аль хэдийн бүртгэлтэй",type:"danger"})})).catch((function(t){e.loading=!1,console.log(t)}))},addCity:function(){var t=this,e=this;this.loading=!0;var s=localStorage.getItem("token");e.$axios({method:"POST",url:this.$appUrl+"/user/add-new-city",headers:{Authorization:"Bearer ".concat(s)},data:{city:this.newCity}}).then((function(s){e.loading=!1,"success"==s.data.result?(t.$notify({title:"Амжилттай",message:"Бүртгэгдлээ",type:"success"}),e.modals.city=!1,e.getInfo()):t.$notify({title:"Амжилтгүй",message:"Аль хэдийн бүртгэлтэй",type:"danger"})})).catch((function(t){e.loading=!1,console.log(t)}))},getInfo:function(){var t=this;this.loading=!0;var e=localStorage.getItem("token");t.$axios({method:"POST",url:this.$appUrl+"/user/new-kiosk-info",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){t.loading=!1,"success"==e.data.result&&(t.city=e.data.city,t.district=e.data.district)})).catch((function(e){t.loading=!1,console.log(e)}))}}}),l=o,n=(s("2a8a"),s("2877")),c=Object(n["a"])(l,i,a,!1,null,"18bf6de7",null);e["default"]=c.exports},d3f0:function(t,e,s){},ed81:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}]},[s("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success",align:"right"}},[1==t.LoggedUser.permission?s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.$router.push("/add-user")}}},[t._v("Хэрэглэгч бүртгэх")]):t._e()],1),s("div",{staticClass:"container-fluid mt--7"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"card shadow border-0 p-5"},[s("div",{staticClass:"table-responsive mt-2"},[s("base-table",{staticClass:"table align-items-center table-flush thead-light",attrs:{"tbody-classes":"list",data:t.users},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[s("th",{attrs:{scope:"row"}},[s("div",{staticClass:"media align-items-center"},[s("div",{staticClass:"media-body"},[s("span",{staticClass:"name mb-0 text-sm",staticStyle:{color:"#8898aa"}},[t._v(t._s(i.lastname)+" "+t._s(i.firstname))]),s("br")])])]),s("td",{attrs:{scope:"row"}},[s("div",{staticClass:"media align-items-center"},[s("div",{staticClass:"media-body"},[s("el-avatar",{attrs:{size:"small",src:"/contents/image/user/"+i.image}})],1)])]),s("td",{attrs:{scope:"row"}},[s("div",{staticClass:"media align-items-center"},[s("div",{staticClass:"media-body"},[s("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(i.email))])])])]),s("td",{attrs:{scope:"row"}},[s("div",{staticClass:"media align-items-center"},[s("div",{staticClass:"media-body"},[s("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(i.phone))])])])]),s("td",{attrs:{scope:"row"}},[s("div",{staticClass:"media align-items-center"},[s("div",{staticClass:"media-body"},[s("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(i.cityname))])])])]),s("td",{attrs:{scope:"row"}},[s("div",{staticClass:"media align-items-center"},[s("div",{staticClass:"media-body"},[s("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(i.districtname))])])])]),s("td",{attrs:{scope:"row"}},[s("div",{staticClass:"media align-items-center"},[s("div",{staticClass:"media-body"},[1==i.permission?s("span",{staticClass:"name mb-0 text-sm"},[t._v("Админ")]):2==i.permission?s("span",{staticClass:"name mb-0 text-sm"},[t._v("Оператор")]):t._e()])])]),1==t.LoggedUser.permission?s("td",{attrs:{align:"right"}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Устгах",placement:"top"}},[s("base-button",{attrs:{type:"danger",size:"sm"},on:{click:function(e){return t.deleteUser(i.id)}}},[s("span",{staticClass:"ni ni-fat-remove"})])],1)],1):t._e()]}}])},[s("template",{slot:"columns"},[s("th",{style:{background:"#F6F9FC"}},[t._v("Овог нэр")]),s("th",{style:{background:"#F6F9FC"}},[t._v("Зураг")]),s("th",{style:{background:"#F6F9FC"}},[t._v("ИМэйл")]),s("th",{style:{background:"#F6F9FC"}},[t._v("Утасны дугаар")]),s("th",{style:{background:"#F6F9FC"}},[t._v("Хот / Аймаг")]),s("th",{style:{background:"#F6F9FC"}},[t._v("Дүүрэг / Сум")]),s("th",{style:{background:"#F6F9FC"}},[t._v("Эрх")]),1==t.LoggedUser.permission?s("th",{style:{background:"#F6F9FC"}}):t._e()])],2)],1)])])])])],1)},a=[],o=(s("4160"),s("a434"),s("159b"),{data:function(){return{users:[],loading:!1,LoggedUser:[]}},mounted:function(){this.LoggedUser=JSON.parse(localStorage.getItem("user")),this.getUsers()},methods:{deleteUser:function(t){var e=this;this.$confirm("Устгахдаа итгэлтэй байна уу?","Санамж",{confirmButtonText:"Тийм",cancelButtonText:"Болих",type:"warning"}).then((function(){if(t==e.LoggedUser.id)e.$message({message:"Уучлаарай, Өөрийгөө устгах боломжгүй",type:"error"});else{var s=e;e.loading=!0;var i=localStorage.getItem("token");s.$axios({method:"POST",url:e.$appUrl+"/user/delete-user",headers:{Authorization:"Bearer ".concat(i)},data:{id:t}}).then((function(e){s.loading=!1,"success"==e.data.result&&s.users.forEach((function(e,i){t==e.id&&s.users.splice(i,1)}))})).catch((function(t){s.loading=!1,console.log(t)}))}}))},getUsers:function(){var t=this;this.loading=!0;var e=localStorage.getItem("token");t.$axios({method:"POST",url:this.$appUrl+"/user/get-users",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){t.loading=!1,t.users=e.data.users})).catch((function(e){t.loading=!1,console.log(e)}))}}}),l=o,n=(s("33cb"),s("2877")),c=Object(n["a"])(l,i,a,!1,null,"8be87ac0",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-09a7f818.a50066fc.js.map