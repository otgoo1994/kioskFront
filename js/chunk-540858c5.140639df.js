(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-540858c5"],{"7e95":function(t,e,a){"use strict";a("7eae")},"7eae":function(t,e,a){},b1f7:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}]},[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success",align:"right"}}),a("div",{staticClass:"container-fluid mt--7"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"card shadow border-0 p-5"},[a("div",{attrs:{align:"right"}},[a("table",[a("tr",[t._m(0),a("td",{staticStyle:{"padding-left":"10px"},attrs:{colspan:"2"}},[t._v(t._s(t.detailNumber))])]),a("tr",[t._m(1),a("td",{staticStyle:{"padding-left":"10px"}},[t._v(t._s(t.detail.poweron)+" - "+t._s(t.detail.poweroff))]),a("td",[a("base-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"sm"},on:{click:function(e){t.modals.changeTime=!0}}},[a("span",{staticClass:"ni ni-settings"})])],1)])])]),a("div",{staticClass:"table-responsive mt-2"},[a("el-tabs",{model:{value:t.activeTag,callback:function(e){t.activeTag=e},expression:"activeTag"}},[a("el-tab-pane",{attrs:{label:"Photo",name:"photos"}},[a("base-table",{staticClass:"table align-items-center table-flush thead-light",attrs:{"tbody-classes":"list",data:t.photos},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("th",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[t._v(" "+t._s(s.id)+" ")])])]),a("th",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[a("el-image",{staticStyle:{width:"40px",height:"auto"},attrs:{src:t.$appUrl+"/contents/image/slide/"+s.name,"preview-src-list":[t.$appUrl+"/contents/image/slide/"+s.name]}})],1)])]),a("td",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[a("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(s.created_at))])])])]),a("td",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[a("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(s.end_at))])])])]),a("td",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[a("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(s.size)+" MB")])])])]),a("td",{attrs:{scope:"row",align:"right"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[s.active?a("badge",{staticClass:"badge-dot",attrs:{type:"success"}},[a("i",{class:"bg-completed"}),a("span",{staticClass:"status"},[t._v("Идэхвитэй")])]):a("badge",{staticClass:"badge-dot",attrs:{type:"danger"}},[a("i",{class:"bg-delayed"}),a("span",{staticClass:"status"},[t._v("Хугацаа дууссан")])])],1)])]),a("td",{attrs:{align:"right"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Устгах",placement:"top"}},[a("base-button",{attrs:{type:"danger",size:"sm"},on:{click:function(e){return t.deletePhoto(s.id)}}},[a("span",{staticClass:"ni ni-fat-remove"})])],1)],1)]}}])},[a("template",{slot:"columns"},[a("th",{style:{background:"#F6F9FC"}},[t._v("#Дугаар")]),a("th",{style:{background:"#F6F9FC"}},[t._v("Зураг")]),a("th",{style:{background:"#F6F9FC"}},[t._v("Эхлэх огноо")]),a("th",{style:{background:"#F6F9FC"}},[t._v("Дуусах огноо")]),a("th",{style:{background:"#F6F9FC"}},[t._v("Файлын хэмжээ")]),a("th",{style:{background:"#F6F9FC","text-align":"right"}},[t._v("Төлөв")]),a("th",{style:{background:"#F6F9FC"}})])],2)],1),a("el-tab-pane",{attrs:{label:"Video",name:"videos"}},[a("base-table",{staticClass:"table align-items-center table-flush thead-light",attrs:{"tbody-classes":"list",data:t.videos},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("th",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[t._v(" "+t._s(s.id)+" ")])])]),a("th",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[t._v(" "+t._s(s.name)+" ")])])]),a("td",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[a("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(s.created_at))])])])]),a("td",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[a("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(s.end_at))])])])]),a("td",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[a("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(s.size)+" MB")])])])]),a("td",{attrs:{scope:"row",align:"right"}},[s.active?a("badge",{staticClass:"badge-dot",attrs:{type:"success"}},[a("i",{class:"bg-completed"}),a("span",{staticClass:"status"},[t._v("Идэхвитэй")])]):a("badge",{staticClass:"badge-dot",attrs:{type:"danger"}},[a("i",{class:"bg-delayed"}),a("span",{staticClass:"status"},[t._v("Хугацаа дууссан")])])],1),a("td",{attrs:{align:"right"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Тоглуулах",placement:"top"}},[a("base-button",{attrs:{type:"info",size:"sm"},on:{click:function(e){return t.playVideo(s)}}},[a("span",{staticClass:"ni ni-button-play"})])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Устгах",placement:"top"}},[a("base-button",{attrs:{type:"danger",size:"sm"},on:{click:function(e){return t.deleteVideo(s.id)}}},[a("span",{staticClass:"ni ni-fat-remove"})])],1)],1)]}}])},[a("template",{slot:"columns"},[a("th",{style:{background:"#F6F9FC"}},[t._v("#Дугаар")]),a("th",{style:{background:"#F6F9FC"}},[t._v("Бичлэг")]),a("th",{style:{background:"#F6F9FC"}},[t._v("Эхлэх огноо")]),a("th",{style:{background:"#F6F9FC"}},[t._v("Дуусах огноо")]),a("th",{style:{background:"#F6F9FC"}},[t._v("Файлын хэмжээ")]),a("th",{style:{background:"#F6F9FC","text-align":"right"}},[t._v("Төлөв")]),a("th",{style:{background:"#F6F9FC"}})])],2)],1),a("el-tab-pane",{attrs:{label:"Text",name:"texts"}},[a("base-table",{staticClass:"table align-items-center table-flush thead-light",attrs:{"tbody-classes":"list",data:t.texts},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("th",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[t._v(" "+t._s(s.id)+" ")])])]),a("th",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[t._v(" "+t._s(s.text)+" ")])])]),a("td",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[a("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(s.created_at))])])])]),a("td",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[a("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(s.end_at))])])])]),a("td",{attrs:{scope:"row",align:"right"}},[s.active?a("badge",{staticClass:"badge-dot",attrs:{type:"success"}},[a("i",{class:"bg-completed"}),a("span",{staticClass:"status"},[t._v("Идэхвитэй")])]):a("badge",{staticClass:"badge-dot",attrs:{type:"danger"}},[a("i",{class:"bg-delayed"}),a("span",{staticClass:"status"},[t._v("Хугацаа дууссан")])])],1),a("td",{attrs:{align:"right"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Устгах",placement:"top"}},[a("base-button",{attrs:{type:"danger",size:"sm"},on:{click:function(e){return t.deleteText(s.id)}}},[a("span",{staticClass:"ni ni-fat-remove"})])],1)],1)]}}])},[a("template",{slot:"columns"},[a("th",{style:{background:"#F6F9FC"}},[t._v("#Дугаар")]),a("th",{style:{background:"#F6F9FC"}},[t._v("Текст")]),a("th",{style:{background:"#F6F9FC"}},[t._v("Эхлэх огноо")]),a("th",{style:{background:"#F6F9FC"}},[t._v("Дуусах огноо")]),a("th",{style:{background:"#F6F9FC","text-align":"right"}},[t._v("Төлөв")]),a("th",{style:{background:"#F6F9FC"}})])],2)],1),a("el-tab-pane",{attrs:{label:"Logs",name:"log"}},[a("table",{staticClass:"table align-items-center table-flush thead-light"},[a("thead",[a("th",{style:{background:"#F6F9FC"}},[t._v("#Дугаар")]),a("th",{style:{background:"#F6F9FC"}},[t._v("Шалгасан огноо")]),a("th",{style:{background:"#F6F9FC"}},[t._v("Төлөв")])]),a("tbody",t._l(t.currentSlide,(function(e,s){return a("tr",{key:s},[a("th",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[t._v(" "+t._s(s+1)+" ")])])]),a("td",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[a("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(e.date))])])])]),a("td",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[e.live?a("span",{staticClass:"name mb-0 text-sm"},[a("span",{staticStyle:{color:"green"}},[t._v("Онлайн")])]):a("span",{staticClass:"name mb-0 text-sm"},[a("span",{staticStyle:{color:"red"}},[t._v("Оффлайн")])])])])])])})),0)]),a("div",{staticStyle:{"padding-top":"20px"},attrs:{align:"center"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":20,total:t.logs.length},on:{"current-change":t.currantPageChanged}})],1)])],1)],1)])])])]),a("modal",{attrs:{show:t.modals.playvideo},on:{"update:show":function(e){return t.$set(t.modals,"playvideo",e)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("Тоглуулагч")]),a("div",{staticClass:"row"},[a("video",{ref:"homevideo",attrs:{id:"homevideo",width:"100%",controls:""}},[a("source",{attrs:{src:t.currentVideo.src,type:t.currentVideo.type}})])])]),a("modal",{attrs:{show:t.modals.changeTime},on:{"update:show":function(e){return t.$set(t.modals,"changeTime",e)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("Ажиллах цаг солих")]),a("div",[a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-time-select",{staticStyle:{width:"100%"},attrs:{"picker-options":{start:"06:00",step:"00:10",end:"23:30"},placeholder:"Асах цаг"},model:{value:t.runtime.poweron,callback:function(e){t.$set(t.runtime,"poweron",e)},expression:"runtime.poweron"}})],1),a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-time-select",{staticStyle:{width:"100%"},attrs:{"picker-options":{start:"06:00",step:"00:10",end:"23:30"},placeholder:"Унтрах цаг"},model:{value:t.runtime.poweroff,callback:function(e){t.$set(t.runtime,"poweroff",e)},expression:"runtime.poweroff"}})],1)],1)],1),a("template",{slot:"footer"},[a("base-button",{staticClass:"ml-auto",attrs:{type:"link"},on:{click:function(e){t.modals.changeTime=!1}}},[t._v("Гарах")]),a("base-button",{attrs:{type:"primary"},on:{click:t.changeKioskRunTime}},[t._v("Хадгалах")])],1)],2)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("strong",[t._v("Киоскын дугаар: ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("strong",[t._v("Ажиллах цаг: ")])])}],o=(a("4160"),a("fb6a"),a("a434"),a("b0c0"),a("159b"),{data:function(){return{detailNumber:"",kiosk:[],videos:[],logs:[],texts:[],photos:[],loading:!1,activeTag:"photos",modals:{playvideo:!1,changeTime:!1},currentVideo:{src:"",type:""},detail:[],runtime:{poweron:"",poweroff:""},currentPage:1}},computed:{currentSlide:function(){return this.logs.slice(20*(this.currentPage-1),20*this.currentPage)}},mounted:function(){this.detailNumber=this.$route.params.id,this.getDetail()},methods:{currantPageChanged:function(t){this.currentPage=t},changeKioskRunTime:function(){var t=this;this.loading=!0;var e=localStorage.getItem("token");t.$axios({method:"POST",url:this.$appUrl+"/user/change-runtime",headers:{Authorization:"Bearer ".concat(e)},data:{poweron:this.runtime.poweron,poweroff:this.runtime.poweroff,kiosk:this.detailNumber}}).then((function(e){200==e.data.result&&(t.detail.poweron=t.runtime.poweron,t.detail.poweroff=t.runtime.poweroff,t.loading=!1,t.modals.changeTime=!1,t.$notify({title:"Амжилттай",message:"Шинэчлэгдлээ",type:"success"}))}))},deleteVideo:function(t){var e=this;this.$confirm("Хасахдаа итгэлтэй байна уу?","Санамж",{confirmButtonText:"Тийм",cancelButtonText:"Болих",type:"warning"}).then((function(){var a=e;e.loading=!0;var s=localStorage.getItem("token");a.$axios({method:"POST",url:e.$appUrl+"/user/remove-video-from-kiosk",headers:{Authorization:"Bearer ".concat(s)},data:{id:t,kiosk:e.detailNumber}}).then((function(e){a.loading=!1,200==e.data.result?(a.videos.forEach((function(e,s){e.id==t&&a.videos.splice(s,1)})),a.$notify({title:"Амжилттай",message:"Бичлэг хасагдлаа",type:"success"})):a.$notify({title:"Амжилтгүй",message:"Алдаа гарлаа",type:"warning"})})).catch((function(t){a.loading=!1,console.log(t)}))}))},deleteText:function(t){var e=this;this.$confirm("Хасахдаа итгэлтэй байна уу?","Санамж",{confirmButtonText:"Тийм",cancelButtonText:"Болих",type:"warning"}).then((function(){var a=e;e.loading=!0;var s=localStorage.getItem("token");a.$axios({method:"POST",url:e.$appUrl+"/user/remove-text-from-kiosk",headers:{Authorization:"Bearer ".concat(s)},data:{id:t,kiosk:e.detailNumber}}).then((function(e){a.loading=!1,200==e.data.result?(a.texts.forEach((function(e,s){e.id==t&&a.texts.splice(s,1)})),a.$notify({title:"Амжилттай",message:"Текст хасагдлаа",type:"success"})):a.$notify({title:"Амжилтгүй",message:"Алдаа гарлаа",type:"warning"})})).catch((function(t){a.loading=!1,console.log(t)}))}))},deletePhoto:function(t){var e=this;this.$confirm("Хасахдаа итгэлтэй байна уу?","Санамж",{confirmButtonText:"Тийм",cancelButtonText:"Болих",type:"warning"}).then((function(){var a=e;e.loading=!0;var s=localStorage.getItem("token");a.$axios({method:"POST",url:e.$appUrl+"/user/remove-photo-from-kiosk",headers:{Authorization:"Bearer ".concat(s)},data:{id:t,kiosk:e.detailNumber}}).then((function(e){a.loading=!1,200==e.data.result?(a.photos.forEach((function(e,s){e.id==t&&a.photos.splice(s,1)})),a.$notify({title:"Амжилттай",message:"Зураг хасагдлаа",type:"success"})):a.$notify({title:"Амжилтгүй",message:"Алдаа гарлаа",type:"warning"})})).catch((function(t){a.loading=!1,console.log(t)}))}))},playVideo:function(t){this.currentVideo.src=this.$appUrl+"/contents/video/"+t.name,this.currentVideo.type=t.extn,this.$refs.homevideo.load(),this.modals.playvideo=!0},getDetail:function(){var t=this;this.loading=!0;var e=localStorage.getItem("token");t.$axios({method:"POST",url:this.$appUrl+"/kiosk/get-content",headers:{Authorization:"Bearer ".concat(e)},data:{detailnumber:this.detailNumber}}).then((function(e){console.log(e),t.loading=!1,200==e.data.status?(t.photos=e.data.photos,t.videos=e.data.videos,t.texts=e.data.text,t.detail=e.data.k,t.runtime.poweron=e.data.k.poweron,t.runtime.poweroff=e.data.k.poweroff,t.logs=e.data.logfile):t.$router.push("/kiosks")})).catch((function(e){t.loading=!1,console.log(e)}))}}}),n=o,l=(a("7e95"),a("2877")),r=Object(l["a"])(n,s,i,!1,null,"436fc353",null);e["default"]=r.exports},fb6a:function(t,e,a){"use strict";var s=a("23e7"),i=a("861d"),o=a("e8b5"),n=a("23cb"),l=a("50c4"),r=a("fc6a"),c=a("8418"),d=a("b622"),m=a("1dde"),u=a("ae40"),p=m("slice"),g=u("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),v=[].slice,b=Math.max;s({target:"Array",proto:!0,forced:!p||!g},{slice:function(t,e){var a,s,d,m=r(this),u=l(m.length),p=n(t,u),g=n(void 0===e?u:e,u);if(o(m)&&(a=m.constructor,"function"!=typeof a||a!==Array&&!o(a.prototype)?i(a)&&(a=a[h],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return v.call(m,p,g);for(s=new(void 0===a?Array:a)(b(g-p,0)),d=0;p<g;p++,d++)p in m&&c(s,d,m[p]);return s.length=d,s}})}}]);
//# sourceMappingURL=chunk-540858c5.140639df.js.map